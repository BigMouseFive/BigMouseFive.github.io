---
layout: post
title: Noon 自动改价软件设计
date: '2019-07-20 20:58'
categories: 
 - 工作记录
tags:
 - 自动改价程序
---

# 1. 改价条件

A. 黄金购物车是否是自家店铺
B. 是否是FBN产品
C. 黄金购物车是否是FBN
D. 差价比是否超过降价比

注：
1. 自家店铺（类似白名单概念）

# 2. 详细改价场景[noon]

A. 黄金购物车是自家店铺，不修改
B. 是FBN产品，黄金购物车是FBN，差价比1超过降价比，不修改。
C. 是FBN产品，黄金购物车是FBN，差价比1不超过降价比，修改价格为[min(购物车价格，本店铺价格) - 降价]
D. 是FBN产品，黄金购物车不是FBN，修改价格为[本店铺价格-降价]，如果改价后的价格比黄金购物车价格还低则不修改
E. 不是FBN产品，差价比2超过降价比，不修改。
F. 不是FBN产品，差价比2不超过降价比，修改价格为[min(购物车价格，最低价) - 降价]

注：
1. 差价比1 = |购物车价格 - 本店铺价格| / 本店铺价格
2. 差价比2 = |min(购物车价格,  最低价) - 本店铺价格| / 本店铺价格

# 2. 详细改价场景[amazon]

A. 黄金购物车是自家店铺，不修改
B. 差价比1超过降价比，不修改。
C. 差价比1不超过降价比，修改价格为[min(购物车价格，最低价) - 降价]

注：
1. 差价比1 = |min(购物车价格, 最低价) - 本店铺价格| / 本店铺价格
2. FBN产品价格统一加上10AED运费

# 3. 用户可以设置参数

## 3.1 通用参数
A. 自家店铺
B. 降价
C. 降价比
D. 循环改价一次等待时间
E. 最大降价比
F. 最大改价次数 

## 3.2 指定ean参数
A. 最低价
B. 最大改价次数

注：
1. 支持在改价运行的时候修改参数


# 4. 任务列表

* [x] 导出黄金购物车情况到表格
* [x] 在deprecated中对control参数做判断，并对暂停，运行和停止做出对应的处理
* [x] 在添加产品白名单的时候会出现table 不存在的错误
* [x] OpearteProcess中，搜索产品的时候要对variant_name做判断
* [x] 取消控制软件中更新参数的按钮，每次做了修改就立刻保存
* [x] 对于可用店铺数量要做控制，一定要实现“购买了两个店铺的就只能是具体的两个店铺”
* [x] 只允许运行一次程序
* [x] 导出购物车情况
* [x] 导出改价情况
* [ ] 统计图：购物车店铺数量统计(扇形图)，
* [ ] 登录超时问题
* [x] 后台搜索产品提示：未找到该产品，但实际上有的


